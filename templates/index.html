<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Mental Health Predictor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding: 20px;
            background-color: #f8f9fa;
        }
        .prediction-card {
            display: none;
            margin-top: 20px;
        }
        .form-container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .result-container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1, h2, h3 {
            color: #343a40;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Student Mental Health Prediction</h1>
            <p class="lead">This tool uses machine learning to predict anxiety levels and counseling needs based on student data</p>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="form-container">
                    <h2>Enter Student Information</h2>
                    <form id="prediction-form">
                        <div class="mb-3">
                            <label for="Age" class="form-label">Age</label>
                            <input type="number" class="form-control" id="Age" name="Age" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="Gender" class="form-label">Gender</label>
                            <select class="form-control" id="Gender" name="Gender" required>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="CourseLevel" class="form-label">Course Level</label>
                            <select class="form-control" id="CourseLevel" name="CourseLevel" required>
                                <option value="Undergraduate">Undergraduate</option>
                                <option value="Graduate">Graduate</option>
                                <option value="PhD">PhD</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="YearOfStudy" class="form-label">Year of Study</label>
                            <input type="number" class="form-control" id="YearOfStudy" name="YearOfStudy" min="1" max="7" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="CGPA" class="form-label">CGPA</label>
                            <input type="number" step="0.01" class="form-control" id="CGPA" name="CGPA" min="0" max="4" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="MaritalStatus" class="form-label">Marital Status</label>
                            <select class="form-control" id="MaritalStatus" name="MaritalStatus" required>
                                <option value="Single">Single</option>
                                <option value="Married">Married</option>
                                <option value="Divorced">Divorced</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="Depression" class="form-label">Depression Level (1-10)</label>
                            <input type="range" class="form-range" id="Depression" name="DepressionLevel" min="1" max="10" required>
                            <div class="d-flex justify-content-between">
                                <span>Low</span>
                                <span>High</span>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="Anxiety" class="form-label">Anxiety Level (1-10)</label>
                            <input type="range" class="form-range" id="Anxiety" name="AnxietyLevel" min="1" max="10" required>
                            <div class="d-flex justify-content-between">
                                <span>Low</span>
                                <span>High</span>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="Stress" class="form-label">Stress Level (1-10)</label>
                            <input type="range" class="form-range" id="Stress" name="StressLevel" min="1" max="10" required>
                            <div class="d-flex justify-content-between">
                                <span>Low</span>
                                <span>High</span>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="Sleep" class="form-label">Sleep Quality (1-10)</label>
                            <input type="range" class="form-range" id="Sleep" name="SleepQuality" min="1" max="10" required>
                            <div class="d-flex justify-content-between">
                                <span>Poor</span>
                                <span>Excellent</span>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary w-100">Predict</button>
                    </form>
                </div>
            </div>
            
            <div class="col-md-6">
                <div id="results" class="result-container" style="display: none;">
                    <h2>Prediction Results</h2>
                    <div class="alert alert-info">
                        <p>These predictions are based on the machine learning model trained on student mental health data:</p>
                    </div>
                    
                    <div class="card mb-3">
                        <div class="card-header">Anxiety Level Prediction</div>
                        <div class="card-body">
                            <h3 id="anxiety-result" class="card-title"></h3>
                            <p id="anxiety-confidence" class="card-text"></p>
                            <div class="progress mb-3">
                                <div id="anxiety-progress" class="progress-bar bg-warning" role="progressbar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">Counseling Need Prediction</div>
                        <div class="card-body">
                            <h3 id="counseling-result" class="card-title"></h3>
                            <p id="counseling-confidence" class="card-text"></p>
                            <div class="progress mb-3">
                                <div id="counseling-progress" class="progress-bar bg-info" role="progressbar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-warning mt-3">
                        <strong>Note:</strong> This is a predictive tool and should not replace professional assessment. If you're experiencing mental health challenges, please consult with a healthcare provider.
                    </div>
                </div>
                
                <div id="error-message" class="alert alert-danger mt-3" style="display: none;">
                    An error occurred during prediction. Please try again.
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            // Handle form submission
            $("#prediction-form").submit(function(e) {
                e.preventDefault();
                
                // Show loading state
                $("button[type='submit']").prop("disabled", true).html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Processing...');
                
                // Send prediction request
                $.ajax({
                    url: "/predict",
                    type: "POST",
                    data: $(this).serialize(),
                    success: function(response) {
                        if (response.success) {
                            // Display results
                            $("#anxiety-result").text(response.anxiety_level);
                            $("#anxiety-confidence").text("Confidence: " + response.anxiety_confidence);
                            
                            $("#counseling-result").text(response.counseling_need);
                            $("#counseling-confidence").text("Confidence: " + response.counseling_confidence);
                            
                            // Set progress bars
                            let anxietyConfidence = parseFloat(response.anxiety_confidence);
                            $("#anxiety-progress").css("width", anxietyConfidence + "%");
                            
                            let counselingConfidence = parseFloat(response.counseling_confidence);
                            $("#counseling-progress").css("width", counselingConfidence + "%");
                            
                            // Show results
                            $("#results").show();
                            $("#error-message").hide();
                        } else {
                            // Show error
                            $("#error-message").text(response.error).show();
                            $("#results").show();
                        }
                    },
                    error: function() {
                        $("#error-message").text("Server error. Please try again later.").show();
                        $("#results").hide();
                    },
                    complete: function() {
                        // Reset button state
                        $("button[type='submit']").prop("disabled", false).text("Predict");
                    }
                });
            });
        });
    </script>
</body>
</html>